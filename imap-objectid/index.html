<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>IMAP Extension for Object Identifiers</title>
<meta content="Bron Gondwana" name="author">
<meta content="Mauro De Gennaro" name="author">
<meta content="
       This document updates   (IMAP4rev1) with persistent
identifiers on mailboxes and messages to allow clients to more
efficiently reuse cached data when resources have changed location on
the server. 
       This document obsoletes   by incorporating support for partial
implementation of object identifiers and by extending the MAILBOXID
identifier to include account-level context. The account identifier
extension enables IMAP servers to provide account-level context for
mailboxes when multiple accounts are accessible through a single IMAP
connection, facilitating interoperability with the JSON Meta Application
Protocol (JMAP) in multi-account scenarios. 
    " name="description">
<meta content="xml2rfc 3.31.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-gondwana-degennaro-imap-objectid-bis-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.31.0
    Python 3.13.3
    ConfigArgParse 1.7.1
    google-i18n-address 3.1.1
    intervaltree 3.1.0
    Jinja2 3.1.6
    lxml 6.0.2
    platformdirs 4.5.0
    pycountry 24.6.1
    PyYAML 6.0.3
    requests 2.32.5
    wcwidth 0.2.14
-->
<link href="index.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necessary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://static.ietf.org/fonts/noto-sans/import.css'); /* Sans-serif */
@import url('https://static.ietf.org/fonts/noto-serif/import.css'); /* Serif (print) */
@import url('https://static.ietf.org/fonts/roboto-mono/import.css'); /* Monospace */

:root {
  --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
  --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
  --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
}

@viewport {
  zoom: 1.0;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: var(--font-sans);
  line-height: 1.6;
  scroll-behavior: smooth;
  overflow-wrap: break-word;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
@media print {
  svg {
    max-height: 850px;
    max-width: 660px;
  }
}
svg[font-family~="serif" i], svg [font-family~="serif" i] {
  font-family: var(--font-serif);
}
svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
  font-family: var(--font-sans);
}
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  display: table;
  border: none;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre {
  background-color: #f9f9f9;
  font-family: var(--font-mono);
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
blockquote > *:last-child {
  margin-bottom: 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}
.xref {
  overflow-wrap: normal;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    max-width: 100%;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.refSubseries {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: var(--font-sans);
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  .breakable pre {
    break-inside: auto;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The following is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
.sourcecode pre,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .artwork > pre,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: upper-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background slightly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr {
  break-inside: avoid;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottom margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code, dt tt, dt code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the compact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > blockquote:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div.sourcecode:first-child,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type:only-child {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">IMAP OBJECTID</td>
<td class="right">December 2025</td>
</tr></thead>
<tfoot><tr>
<td class="left">Gondwana &amp; De Gennaro</td>
<td class="center">Expires 22 June 2026</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">mailmaint</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-gondwana-degennaro-imap-objectid-bis-00</dd>
<dt class="label-obsoletes">Obsoletes:</dt>
<dd class="obsoletes">
<a href="https://www.rfc-editor.org/rfc/rfcRFC8474" class="eref">RFC8474</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2025-12-19" class="published">19 December 2025</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2026-06-22">22 June 2026</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">B. Gondwana</div>
<div class="org">Fastmail</div>
</div>
<div class="author">
      <div class="author-name">M. De Gennaro</div>
<div class="org">Stalwart Labs</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">IMAP Extension for Object Identifiers</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document updates <span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span> (IMAP4rev1) with persistent
identifiers on mailboxes and messages to allow clients to more
efficiently reuse cached data when resources have changed location on
the server.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This document obsoletes <span>[<a href="#RFC8474" class="cite xref">RFC8474</a>]</span> by incorporating support for partial
implementation of object identifiers and by extending the MAILBOXID
identifier to include account-level context. The account identifier
extension enables IMAP servers to provide account-level context for
mailboxes when multiple accounts are accessible through a single IMAP
connection, facilitating interoperability with the JSON Meta Application
Protocol (JMAP) in multi-account scenarios.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 22 June 2026.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2025 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="auto internal xref">1.1</a>.  <a href="#name-notational-conventions" class="internal xref">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-capability-identification" class="internal xref">CAPABILITY Identification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="auto internal xref">2.1</a>.  <a href="#name-full-implementation" class="internal xref">Full Implementation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="auto internal xref">2.2</a>.  <a href="#name-partial-implementation" class="internal xref">Partial Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="auto internal xref">2.2.1</a>.  <a href="#name-objectidmailboxid" class="internal xref">OBJECTID=MAILBOXID</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.2">
                    <p id="section-toc.1-1.2.2.2.2.2.1"><a href="#section-2.2.2" class="auto internal xref">2.2.2</a>.  <a href="#name-objectidemailid" class="internal xref">OBJECTID=EMAILID</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2.2.3">
                    <p id="section-toc.1-1.2.2.2.2.3.1"><a href="#section-2.2.3" class="auto internal xref">2.2.3</a>.  <a href="#name-capability-combinations" class="internal xref">Capability Combinations</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-mailboxid-object-identifier" class="internal xref">MAILBOXID Object Identifier</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="auto internal xref">3.1</a>.  <a href="#name-account-identifier-componen" class="internal xref">Account Identifier Component</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="auto internal xref">3.2</a>.  <a href="#name-mailbox-identifier-componen" class="internal xref">Mailbox Identifier Component</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="auto internal xref">3.3</a>.  <a href="#name-new-response-code-for-creat" class="internal xref">New Response Code for CREATE</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="auto internal xref">3.4</a>.  <a href="#name-new-ok-untagged-response-fo" class="internal xref">New OK Untagged Response for SELECT and EXAMINE</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="auto internal xref">3.5</a>.  <a href="#name-new-attribute-for-status" class="internal xref">New Attribute for STATUS</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-emailid-object-identifier-a" class="internal xref">EMAILID Object Identifier and THREADID Correlator</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-emailid-identifier-for-iden" class="internal xref">EMAILID Identifier for Identical Messages</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-threadid-identifier-for-rel" class="internal xref">THREADID Identifier for Related Messages</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-new-message-data-items-in-f" class="internal xref">New Message Data Items in FETCH and UID FETCH Commands</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-new-filters-on-search-comma" class="internal xref">New Filters on SEARCH Command</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-formal-syntax" class="internal xref">Formal Syntax</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-implementation-consideratio" class="internal xref">Implementation Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-assigning-object-identifier" class="internal xref">Assigning Object Identifiers</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-interaction-with-special-ca" class="internal xref">Interaction with Special Cases</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
                <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-client-usage" class="internal xref">Client Usage</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
                <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-advice-to-client-implemente" class="internal xref">Advice to Client Implementers</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-future-considerations" class="internal xref">Future Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-imap-capabilities-registry" class="internal xref">IMAP Capabilities Registry</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-imap-response-codes-registr" class="internal xref">IMAP Response Codes Registry</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-object-identifier-generatio" class="internal xref">Object Identifier Generation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-account-identifier-exposure" class="internal xref">Account Identifier Exposure</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-cross-account-information-l" class="internal xref">Cross-Account Information Leakage</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="auto internal xref">10.4</a>.  <a href="#name-consistency-with-jmap-authe" class="internal xref">Consistency with JMAP Authentication</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.5">
                <p id="section-toc.1-1.10.2.5.1"><a href="#section-10.5" class="auto internal xref">10.5</a>.  <a href="#name-privacy-in-multi-tenant-env" class="internal xref">Privacy in Multi-Tenant Environments</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="auto internal xref">11.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="auto internal xref">11.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-ideas-for-implementing-obje" class="internal xref">Ideas for Implementing Object Identifiers</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-changes-from-rfc-8474" class="internal xref">Changes from RFC 8474</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-C" class="auto internal xref">Appendix C</a>.  <a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-D" class="auto internal xref">Appendix D</a>.  <a href="#name-changes" class="internal xref">Changes</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-E" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">IMAP stores are often used by many clients.  Each client may cache
data from the server so that it does not need to redownload
information.  <span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span> states that a mailbox can be uniquely
referenced by its name and UIDVALIDITY, and a message within that
mailbox can be uniquely referenced by its mailbox (name +
UIDVALIDITY) and unique identifier (UID).  The triple of mailbox
name, UIDVALIDITY, and UID is guaranteed to be immutable.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2"><span>[<a href="#RFC4315" class="cite xref">RFC4315</a>]</span> defines a COPYUID response that allows a client that copies
messages to know the mapping between the UIDs in the source and
destination mailboxes and, hence, update its local cache.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">If a mailbox is successfully renamed by a client, that client will
know that the same messages exist in the destination mailbox name as
previously existed in the source mailbox name.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">The result is that the client that copies (or moves <span>[<a href="#RFC6851" class="cite xref">RFC6851</a>]</span>)
messages or renames a mailbox can update its local cache, but any
other client connected to the same store cannot know with certainty
that the messages are identical, so it will redownload everything.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This extension adds new properties to a message (EMAILID) and mailbox
(MAILBOXID).  These properties allow a client to quickly identify
messages or mailboxes that have been renamed by another client.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This extension also adds an optional thread identifier (THREADID) to
messages, which can be used by the server to indicate messages that
it has identified to be related.  A server that does not implement
threading will return NIL to all requests for THREADID.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Additionally, this document introduces partial implementation support,
allowing servers to implement only a subset of the object identifier
types (MAILBOXID or EMAILID) when full implementation is not feasible.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">Furthermore, this document extends the MAILBOXID to include an account
identifier component, enabling precise correlation of mailboxes across
IMAP and JMAP protocols in multi-account environments. This is
particularly relevant for environments where IMAP mailboxes include
shared mailboxes from multiple JMAP accounts, as defined in <span>[<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="capability-identification">
<section id="section-2">
      <h2 id="name-capability-identification">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-capability-identification" class="section-name selfRef">CAPABILITY Identification</a>
      </h2>
<p id="section-2-1">IMAP servers that support this extension indicate their level of
support through capability tokens.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="full-implementation">
<section id="section-2.1">
        <h3 id="name-full-implementation">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-full-implementation" class="section-name selfRef">Full Implementation</a>
        </h3>
<p id="section-2.1-1">A server that fully implements all aspects of this specification <span class="bcp14">MUST</span>
include "OBJECTID" in the response list to the CAPABILITY command. A
server advertising "OBJECTID" <span class="bcp14">MUST</span> support MAILBOXID (including the
account identifier component), EMAILID, and THREADID as described in
this document.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="partial-implementation">
<section id="section-2.2">
        <h3 id="name-partial-implementation">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-partial-implementation" class="section-name selfRef">Partial Implementation</a>
        </h3>
<p id="section-2.2-1">Some servers may be unable to provide persistent identifiers for all
data types but be able to provide them for others. This specification
allows a server to indicate partial support through specific capability
tokens.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<div id="objectidmailboxid">
<section id="section-2.2.1">
          <h4 id="name-objectidmailboxid">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-objectidmailboxid" class="section-name selfRef">OBJECTID=MAILBOXID</a>
          </h4>
<p id="section-2.2.1-1">If a server advertises the capability "OBJECTID=MAILBOXID", it indicates
support for mailbox object identifiers as described in <a href="#mailboxid" class="auto internal xref">Section 3</a>,
including the account identifier component. A server advertising this
capability <span class="bcp14">MUST</span> support all MAILBOXID functionality but is not required
to support EMAILID or THREADID.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="objectidemailid">
<section id="section-2.2.2">
          <h4 id="name-objectidemailid">
<a href="#section-2.2.2" class="section-number selfRef">2.2.2. </a><a href="#name-objectidemailid" class="section-name selfRef">OBJECTID=EMAILID</a>
          </h4>
<p id="section-2.2.2-1">If a server advertises the capability "OBJECTID=EMAILID", it indicates
support for email object identifiers as described in <a href="#emailid" class="auto internal xref">Section 4</a> and
optionally thread identifiers as described in <a href="#threadid" class="auto internal xref">Section 4.2</a>. A server
advertising this capability <span class="bcp14">MUST</span> support EMAILID functionality and <span class="bcp14">MAY</span>
support THREADID functionality. A server that does not support THREADID
<span class="bcp14">MUST</span> return NIL for all THREADID requests.<a href="#section-2.2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="capability-combinations">
<section id="section-2.2.3">
          <h4 id="name-capability-combinations">
<a href="#section-2.2.3" class="section-number selfRef">2.2.3. </a><a href="#name-capability-combinations" class="section-name selfRef">Capability Combinations</a>
          </h4>
<p id="section-2.2.3-1">A server that supports both MAILBOXID and EMAILID <span class="bcp14">SHOULD</span> advertise only
the "OBJECTID" capability rather than advertising both "OBJECTID=MAILBOXID"
and "OBJECTID=EMAILID" separately. Clients are <span class="bcp14">RECOMMENDED</span> to check for
both the specific capabilities and the general "OBJECTID" capability when
determining what requests to send.<a href="#section-2.2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.2.3-2">A server <span class="bcp14">MUST NOT</span> advertise "OBJECTID" together with "OBJECTID=MAILBOXID"
or "OBJECTID=EMAILID", as the presence of "OBJECTID" implies full support.<a href="#section-2.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="mailboxid">
<section id="section-3">
      <h2 id="name-mailboxid-object-identifier">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-mailboxid-object-identifier" class="section-name selfRef">MAILBOXID Object Identifier</a>
      </h2>
<p id="section-3-1">The MAILBOXID is a server-allocated unique identifier for each
mailbox, consisting of two components: an account identifier and a
mailbox identifier. The account identifier specifies the account
context to which the mailbox belongs, while the mailbox identifier
uniquely identifies the mailbox within that account context.<a href="#section-3-1" class="pilcrow">¶</a></p>
<div id="account-identifier-component">
<section id="section-3.1">
        <h3 id="name-account-identifier-componen">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-account-identifier-componen" class="section-name selfRef">Account Identifier Component</a>
        </h3>
<p id="section-3.1-1">The account identifier component of MAILBOXID specifies the account
to which a mailbox belongs. When used in conjunction with the mailbox
identifier component, it provides complete disambiguation of mailboxes
in environments where multiple accounts are accessible through a single
IMAP session.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">The account identifier is represented as an opaque string using the
same character set and syntactic constraints as the mailbox identifier
component, as defined in <a href="#objectid-syntax" class="auto internal xref">Section 6</a>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">The server <span class="bcp14">MUST</span> return the same account identifier for all mailboxes
that belong to the same account. Conversely, the server <span class="bcp14">MUST NOT</span> return
the same account identifier for mailboxes that belong to different
accounts, even if accessed within the same IMAP session.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">When a server advertises the "JMAPACCESS" capability as defined in
<span>[<a href="#RFC9698" class="cite xref">RFC9698</a>]</span>, it <span class="bcp14">MUST</span> ensure that the account identifier returned via
IMAP matches the accountId property of the corresponding Mailbox object
in JMAP, as defined in <span><a href="https://rfc-editor.org/rfc/rfc8620#section-1.6.2" class="relref">Section 1.6.2</a> of [<a href="#RFC8620" class="cite xref">RFC8620</a>]</span>. This correspondence
is essential for clients to correlate mailboxes across the two protocols.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">When a mailbox is accessed exclusively through IMAP and does not have
a corresponding representation in JMAP, the server <span class="bcp14">MAY</span> still assign an
account identifier to maintain consistency in the IMAP representation.
However, such account identifiers need not correspond to any JMAP account
identifier.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1-6">The account identifier is conceptually immutable for a given account
within an IMAP session. However, if the underlying account is deleted
or the user's access to that account is revoked, the associated
mailboxes will no longer be accessible via IMAP.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mailbox-identifier-component">
<section id="section-3.2">
        <h3 id="name-mailbox-identifier-componen">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-mailbox-identifier-componen" class="section-name selfRef">Mailbox Identifier Component</a>
        </h3>
<p id="section-3.2-1">The mailbox identifier component uniquely identifies a mailbox within
the context of its account.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The server <span class="bcp14">MUST</span> return the same mailbox identifier for a mailbox with
the same name and UIDVALIDITY within the same account.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">The server <span class="bcp14">MUST NOT</span> report the same mailbox identifier for two different
mailboxes within the same account at the same time.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">The server <span class="bcp14">MUST NOT</span> reuse the same mailbox identifier for a mailbox that
does not obey all the invariants that <span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span> defines for a mailbox
that does not change name or UIDVALIDITY.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">The server <span class="bcp14">MUST</span> keep the same mailbox identifier for the source and
destination when renaming a mailbox in a way that keeps the same
messages (but see <span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span> for the special case regarding the
renaming of INBOX, which is treated as creating a new mailbox and
moving the messages).<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="new-response-code-for-create">
<section id="section-3.3">
        <h3 id="name-new-response-code-for-creat">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-new-response-code-for-creat" class="section-name selfRef">New Response Code for CREATE</a>
        </h3>
<p id="section-3.3-1">This document extends the CREATE command to have the response code
MAILBOXID on successful mailbox creation.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">A server advertising the OBJECTID capability or the OBJECTID=MAILBOXID
capability <span class="bcp14">MUST</span> include the MAILBOXID response code in the tagged OK
response to all successful CREATE commands.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">Syntax: "MAILBOXID" SP "(" objectid SP objectid ")"<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">The first objectid is the account identifier and the second objectid
is the mailbox identifier. This is a response code in the tagged OK
response for successful CREATE command.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
<p id="section-3.3-5">Example:<a href="#section-3.3-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.3-6">
<pre>
C: 3 create foo
S: 3 OK [MAILBOXID (u1a48e8e3 F2212ea87-6097-4256-9d51-71338625)] \
        Completed
C: 4 create bar
S: 4 OK [MAILBOXID (u1a48e8e3 F6352ae03-b7f5-463c-896f-d8b48ee3)] \
        Completed
C: 5 create shared/team
S: 5 OK [MAILBOXID (u2b59f9f4 F8839dca12-3ef8-4a72-b63d-54f9e8a1)] \
        Completed
C: 6 create foo
S: 6 NO Mailbox already exists
</pre><a href="#section-3.3-6" class="pilcrow">¶</a>
</div>
<p id="section-3.3-7">In this example, mailboxes "foo" and "bar" are created in account
"u1a48e8e3", while the shared mailbox "shared/team" is created in a
different account "u2b59f9f4". This demonstrates how mailboxes within
the same IMAP session can belong to different accounts.<a href="#section-3.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="new-ok-untagged-response-for-select-and-examine">
<section id="section-3.4">
        <h3 id="name-new-ok-untagged-response-fo">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-new-ok-untagged-response-fo" class="section-name selfRef">New OK Untagged Response for SELECT and EXAMINE</a>
        </h3>
<p id="section-3.4-1">This document adds a new untagged response code to the SELECT and
EXAMINE commands.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">A server advertising the OBJECTID capability or the OBJECTID=MAILBOXID
capability <span class="bcp14">MUST</span> return an untagged OK response with the MAILBOXID
response code on all successful SELECT and EXAMINE commands.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">Syntax: "OK" SP "[" "MAILBOXID" SP "(" objectid SP objectid ")" "]" SP text<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">The first objectid is the account identifier and the second objectid
is the mailbox identifier. This is an untagged OK response to SELECT
or EXAMINE.<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<p id="section-3.4-5">Example:<a href="#section-3.4-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.4-6">
<pre>
C: 27 select "foo"
[...]
S: * OK [MAILBOXID (u1a48e8e3 F2212ea87-6097-4256-9d51-71338625)] Ok
[...]
S: 27 OK [READ-WRITE] Completed

C: 28 select "shared/team"
[...]
S: * OK [MAILBOXID (u2b59f9f4 F8839dca12-3ef8-4a72-b63d-54f9e8a1)] Ok
[...]
S: 28 OK [READ-WRITE] Completed
</pre><a href="#section-3.4-6" class="pilcrow">¶</a>
</div>
<p id="section-3.4-7">This example shows how clients can determine the account context when
selecting different mailboxes within the same IMAP session.<a href="#section-3.4-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="new-attribute-for-status">
<section id="section-3.5">
        <h3 id="name-new-attribute-for-status">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-new-attribute-for-status" class="section-name selfRef">New Attribute for STATUS</a>
        </h3>
<p id="section-3.5-1">This document adds the MAILBOXID attribute to the STATUS command
using the extended syntax defined in <span>[<a href="#RFC4466" class="cite xref">RFC4466</a>]</span>.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">A server that advertises the OBJECTID capability or the OBJECTID=MAILBOXID
capability <span class="bcp14">MUST</span> support the MAILBOXID status attribute.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">Syntax: "MAILBOXID"<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.5-4">The attribute in the STATUS command.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
<p id="section-3.5-5">Syntax: "MAILBOXID" SP "(" objectid SP objectid ")"<a href="#section-3.5-5" class="pilcrow">¶</a></p>
<p id="section-3.5-6">The response item in the STATUS response contains the account identifier
and mailbox identifier assigned by the server for this mailbox.<a href="#section-3.5-6" class="pilcrow">¶</a></p>
<p id="section-3.5-7">Example:<a href="#section-3.5-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5-8">
<pre>
C: 6 status foo (mailboxid)
S: * STATUS foo (MAILBOXID (u1a48e8e3 F2212ea87-6097-4256-9d51-71338625))
S: 6 OK Completed
C: 7 status bar (mailboxid)
S: * STATUS bar (MAILBOXID (u1a48e8e3 F6352ae03-b7f5-463c-896f-d8b48ee3))
S: 7 OK Completed
C: 8 rename foo renamed
S: * OK rename foo renamed
S: 8 OK Completed
C: 9 status renamed (mailboxid)
S: * STATUS renamed (MAILBOXID (u1a48e8e3 F2212ea87-6097-4256-9d51-71338625))
S: 9 OK Completed
C: 10 status bar (mailboxid)
S: * STATUS bar (MAILBOXID (u1a48e8e3 F6352ae03-b7f5-463c-896f-d8b48ee3))
S: 10 OK Completed
</pre><a href="#section-3.5-8" class="pilcrow">¶</a>
</div>
<p id="section-3.5-9">When the LIST-STATUS IMAP capability defined in <span>[<a href="#RFC5819" class="cite xref">RFC5819</a>]</span> is also
available, the STATUS command can be combined with the LIST command.<a href="#section-3.5-9" class="pilcrow">¶</a></p>
<p id="section-3.5-10">Example:<a href="#section-3.5-10" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.5-11">
<pre>
C: 11 list "" "*" return (status (mailboxid))
S: * LIST (\HasNoChildren) "." INBOX
S: * STATUS INBOX (MAILBOXID (u1a48e8e3 \
        Ff8e3ead4-9389-4aff-adb1-d8d89efd8cbf))
S: * LIST (\HasNoChildren) "." bar
S: * STATUS bar (MAILBOXID (u1a48e8e3 F6352ae03-b7f5-463c-896f-d8b48ee3))
S: * LIST (\HasNoChildren) "." renamed
S: * STATUS renamed (MAILBOXID (u1a48e8e3 \
        F2212ea87-6097-4256-9d51-71338625))
S: * LIST (\HasNoChildren) "." shared.team
S: * STATUS shared.team (MAILBOXID (u2b59f9f4 \
        F8839dca12-3ef8-4a72-b63d-54f9e8a1))
S: 11 OK Completed (0.001 secs 4 calls)
</pre><a href="#section-3.5-11" class="pilcrow">¶</a>
</div>
<p id="section-3.5-12">This example demonstrates how clients can efficiently retrieve both
account and mailbox identifiers for multiple mailboxes using the
extended LIST command with STATUS return option.<a href="#section-3.5-12" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="emailid">
<section id="section-4">
      <h2 id="name-emailid-object-identifier-a">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-emailid-object-identifier-a" class="section-name selfRef">EMAILID Object Identifier and THREADID Correlator</a>
      </h2>
<div id="emailid-identifier-for-identical-messages">
<section id="section-4.1">
        <h3 id="name-emailid-identifier-for-iden">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-emailid-identifier-for-iden" class="section-name selfRef">EMAILID Identifier for Identical Messages</a>
        </h3>
<p id="section-4.1-1">The EMAILID data item is an ObjectID that uniquely identifies the
content of a single message.  Anything that must remain immutable on
a {name, uidvalidity, uid} triple must also be the same between
messages with the same EMAILID.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">The server <span class="bcp14">MUST</span> return the same EMAILID for the same triple; hence,
EMAILID is immutable.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">The server <span class="bcp14">MUST</span> return the same EMAILID as the source message for the
matching destination message in the COPYUID pairing after a COPY or
MOVE command <span>[<a href="#RFC6851" class="cite xref">RFC6851</a>]</span>.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">The server <span class="bcp14">MAY</span> assign the same EMAILID as an existing message upon
APPEND (e.g., if it detects that the new message has exactly
identical content to that of an existing message).<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">NOTE: EMAILID only identifies the immutable content of the message.
In particular, it is possible for different messages with the same
EMAILID to have different keywords.  This document does not specify a
way to STORE by EMAILID.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="threadid">
<section id="section-4.2">
        <h3 id="name-threadid-identifier-for-rel">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-threadid-identifier-for-rel" class="section-name selfRef">THREADID Identifier for Related Messages</a>
        </h3>
<p id="section-4.2-1">The THREADID data item is an ObjectID that uniquely identifies a set
of messages that the server believes should be grouped together when
presented.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">THREADID calculation is generally based on some combination of
References, In-Reply-To, and Subject, but the exact logic is left up
to the server implementation.  <span>[<a href="#RFC5256" class="cite xref">RFC5256</a>]</span> describes some algorithms
that could be used; however, this specification does not mandate any
particular strategy.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">The server <span class="bcp14">MUST</span> return the same THREADID for all messages with the
same EMAILID.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">The server <span class="bcp14">SHOULD</span> return the same THREADID for related messages, even
if they are in different mailboxes; for example, messages that would
appear in the same thread if they were in the same mailbox <span class="bcp14">SHOULD</span>
have the same THREADID, even if they are in different mailboxes.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">The server <span class="bcp14">MUST NOT</span> change the THREADID of a message once reported.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">THREADID is <span class="bcp14">OPTIONAL</span>; if the server does not support THREADID or is
unable to calculate relationships between messages, it <span class="bcp14">MUST</span> return
NIL to all FETCH responses for the THREADID data item, and a SEARCH
for THREADID <span class="bcp14">MUST NOT</span> match any messages.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">The server <span class="bcp14">MUST NOT</span> use the same ObjectID value for both EMAILIDs and
THREADIDs.  If they are stored with the same value internally, the
server can generate prefixed values (as shown in the examples below
with M and T prefixes) to avoid clashes.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="new-message-data-items-in-fetch-and-uid-fetch-commands">
<section id="section-4.3">
        <h3 id="name-new-message-data-items-in-f">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-new-message-data-items-in-f" class="section-name selfRef">New Message Data Items in FETCH and UID FETCH Commands</a>
        </h3>
<p id="section-4.3-1">This document defines two FETCH items:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">Syntax: "EMAILID"<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">The EMAILID message data item causes the server to return EMAILID
FETCH response data items.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">Syntax: "THREADID"<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.3-5">The THREADID message data item causes the server to return THREADID
FETCH response data items.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">This document defines the following responses:<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">Syntax: "EMAILID" SP "(" objectid ")"<a href="#section-4.3-7" class="pilcrow">¶</a></p>
<p id="section-4.3-8">The EMAILID response data item contains the server-assigned ObjectID
for each message.<a href="#section-4.3-8" class="pilcrow">¶</a></p>
<p id="section-4.3-9">Syntax: "THREADID" SP "(" objectid ")"<a href="#section-4.3-9" class="pilcrow">¶</a></p>
<p id="section-4.3-10">The THREADID response data item contains the server-assigned ObjectID
for the set of related messages to which this message belongs.<a href="#section-4.3-10" class="pilcrow">¶</a></p>
<p id="section-4.3-11">Syntax: "THREADID" SP nil<a href="#section-4.3-11" class="pilcrow">¶</a></p>
<p id="section-4.3-12">The NIL value is returned for the THREADID response data item when
the server mailbox does not support THREADID calculation.<a href="#section-4.3-12" class="pilcrow">¶</a></p>
<p id="section-4.3-13">Example:<a href="#section-4.3-13" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3-14">
<pre>
C: 5 append inbox "20-Mar-2018 03:07:37 +1100" {733}
[...]
Subject: Message A
Message-ID: &lt;fake.1521475657.54797@example.com&gt;
[...]
S: 5 OK [APPENDUID 1521475658 1] Completed

C: 11 append inbox "20-Mar-2018 03:07:37 +1100" {793}
[...]
Subject: Re: Message A
Message-ID: &lt;fake.1521475657.21213@example.org&gt;
References: &lt;fake.1521475657.54797@example.com&gt;
[...]
S: 11 OK [APPENDUID 1521475658 2] Completed

C: 17 append inbox "20-Mar-2018 03:07:37 +1100" {736}
[...]
Subject: Message C
Message-ID: &lt;fake.1521475657.60280@example.com&gt;
[...]
S: 17 OK [APPENDUID 1521475658 3] Completed

C: 22 fetch 1:* (emailid threadid)
S: * 1 FETCH (EMAILID (M6d99ac3275bb4e) THREADID (T64b478a75b7ea9))
S: * 2 FETCH (EMAILID (M288836c4c7a762) THREADID (T64b478a75b7ea9))
S: * 3 FETCH (EMAILID (M5fdc09b49ea703) THREADID (T11863d02dd95b5))
S: 22 OK Completed (0.000 sec)

C: 23 move 2 foo
S: * OK [COPYUID 1521475659 2 1] Completed
S: * 2 EXPUNGE
S: 23 OK Completed

C: 24 fetch 1:* (emailid threadid)
S: * 1 FETCH (EMAILID (M6d99ac3275bb4e) THREADID (T64b478a75b7ea9))
S: * 2 FETCH (EMAILID (M5fdc09b49ea703) THREADID (T11863d02dd95b5))
S: 24 OK Completed (0.000 sec)
C: 25 select "foo"

C: 25 select "foo"
[...]
S: 25 OK [READ-WRITE] Completed
C: 26 fetch 1:* (emailid threadid)
S: * 1 FETCH (EMAILID (M288836c4c7a762) THREADID (T64b478a75b7ea9))
S: 26 OK Completed (0.000 sec)
</pre><a href="#section-4.3-14" class="pilcrow">¶</a>
</div>
<p id="section-4.3-15">Example: (no THREADID support)<a href="#section-4.3-15" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.3-16">
<pre>
C: 26 fetch 1:* (emailid threadid)
S: * 1 FETCH (EMAILID (M00000001) THREADID NIL)
S: * 2 FETCH (EMAILID (M00000002) THREADID NIL)
S: 26 OK Completed (0.000 sec)
</pre><a href="#section-4.3-16" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="new-filters-on-search-command">
<section id="section-5">
      <h2 id="name-new-filters-on-search-comma">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-new-filters-on-search-comma" class="section-name selfRef">New Filters on SEARCH Command</a>
      </h2>
<p id="section-5-1">This document defines the filters EMAILID and THREADID on the SEARCH
command.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Syntax: "EMAILID" SP objectid<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">Messages whose EMAILID is exactly the specified ObjectID.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">Syntax: "THREADID" SP objectid<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">Messages whose THREADID is exactly the specified ObjectID.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">Example: (as if run before the MOVE shown above when the mailbox had
three messages)<a href="#section-5-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5-7">
<pre>
C: 27 search emailid M6d99ac3275bb4e
S: * SEARCH 1
S: 27 OK Completed (1 msgs in 0.000 secs)
C: 28 search threadid T64b478a75b7ea9
S: * SEARCH 1 2
S: 28 OK Completed (2 msgs in 0.000 secs)
</pre><a href="#section-5-7" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="objectid-syntax">
<section id="section-6">
      <h2 id="name-formal-syntax">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-formal-syntax" class="section-name selfRef">Formal Syntax</a>
      </h2>
<p id="section-6-1">The following syntax specification uses the Augmented Backus-Naur
Form (ABNF) <span>[<a href="#RFC5234" class="cite xref">RFC5234</a>]</span> notation.  Elements not defined here can be
found in the formal syntax of the ABNF <span>[<a href="#RFC5234" class="cite xref">RFC5234</a>]</span>, IMAP <span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span>, and
IMAP ABNF extensions <span>[<a href="#RFC4466" class="cite xref">RFC4466</a>]</span> specifications.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Except as noted otherwise, all alphabetic characters are case
insensitive.  The use of uppercase or lowercase characters to define
token strings is for editorial clarity only.  Implementations <span class="bcp14">MUST</span>
accept these strings in a case-insensitive fashion.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Please note specifically that ObjectID values are case sensitive.<a href="#section-6-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-4">
<pre>
capability =/ "OBJECTID" / "OBJECTID=MAILBOXID" / "OBJECTID=EMAILID"

fetch-att =/ "EMAILID" / "THREADID"

fetch-emailid-resp = "EMAILID" SP "(" objectid ")"
        ; follows tagged-ext production from [RFC4466]

fetch-threadid-resp = "THREADID" SP ( "(" objectid ")" / nil )
        ; follows tagged-ext production from [RFC4466]

msg-att-static =/ fetch-emailid-resp / fetch-threadid-resp

objectid = 1*255(ALPHA / DIGIT / "_" / "-")
        ; characters in object identifiers are case
        ; significant

mailboxid-data = "(" objectid SP objectid ")"
        ; first objectid is account identifier
        ; second objectid is mailbox identifier

resp-text-code =/ "MAILBOXID" SP mailboxid-data
        ; incorporated before the expansion rule of
        ;  atom [SP 1*&lt;any TEXT-CHAR except "]"&gt;]
        ; that appears in [RFC3501]

search-key =/ "EMAILID" SP objectid / "THREADID" SP objectid

status-att =/ "MAILBOXID"

status-att-val =/ "MAILBOXID" SP mailboxid-data
        ; follows tagged-ext production from [RFC4466]
</pre><a href="#section-6-4" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="implementation-considerations">
<section id="section-7">
      <h2 id="name-implementation-consideratio">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-implementation-consideratio" class="section-name selfRef">Implementation Considerations</a>
      </h2>
<div id="assigning-object-identifiers">
<section id="section-7.1">
        <h3 id="name-assigning-object-identifier">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-assigning-object-identifier" class="section-name selfRef">Assigning Object Identifiers</a>
        </h3>
<p id="section-7.1-1">All ObjectID values are allocated by the server.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">In the interest of reducing the possibilities of encoding mistakes,
ObjectIDs are restricted to a safe subset of possible byte values; in
order to allow clients to allocate storage, they are restricted in
length.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<p id="section-7.1-3">An ObjectID is a string of 1 to 255 characters from the following set
of 64 codepoints: a-z, A-Z, 0-9, _, -.  These characters are safe to
use in almost any context (e.g., filesystems, URIs, IMAP atoms).
These are the same characters defined as base64url in <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>.<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<p id="section-7.1-4">For maximum safety, servers should also follow defensive allocation
strategies to avoid creating risks where glob completion or data type
detection may be present (e.g., on filesystems or in spreadsheets).
In particular, it is wise to avoid:<a href="#section-7.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-7.1-5.1">
            <p id="section-7.1-5.1.1">IDs starting with a dash<a href="#section-7.1-5.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.2">
            <p id="section-7.1-5.2.1">IDs starting with digits<a href="#section-7.1-5.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.3">
            <p id="section-7.1-5.3.1">IDs that contain only digits<a href="#section-7.1-5.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.4">
            <p id="section-7.1-5.4.1">IDs that differ only by ASCII case (for example, A vs. a)<a href="#section-7.1-5.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="normal" id="section-7.1-5.5">
            <p id="section-7.1-5.5.1">the specific sequence of three characters NIL in any case (because
this sequence can be confused with the IMAP protocol expression of
the null value)<a href="#section-7.1-5.5.1" class="pilcrow">¶</a></p>
</li>
        </ul>
<p id="section-7.1-6">A good solution to these issues is to prefix every ID with a single
alphabetical character.<a href="#section-7.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="interaction-with-special-cases">
<section id="section-7.2">
        <h3 id="name-interaction-with-special-ca">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-interaction-with-special-ca" class="section-name selfRef">Interaction with Special Cases</a>
        </h3>
<p id="section-7.2-1">The case of RENAME INBOX may need special handling because it has
special behavior, as defined in <span><a href="https://rfc-editor.org/rfc/rfc3501#section-6.3.5" class="relref">Section 6.3.5</a> of [<a href="#RFC3501" class="cite xref">RFC3501</a>]</span>.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">It is advisable (though not required) to have the mailbox identifier
component of MAILBOXID be globally unique, but it is only required to
be unique within messages offered to a single client login to a single
server hostname.  For example, a proxy that aggregates multiple
independent servers <span class="bcp14">MUST NOT</span> advertise the OBJECTID capability unless
it can guarantee that different objects will never use the same
identifiers, even if backend object identifiers collide.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2-3">The account identifier component provides additional disambiguation
in multi-account environments, ensuring that even if two backend
servers use the same mailbox identifier, the combination of account
identifier and mailbox identifier remains unique within the IMAP
session.<a href="#section-7.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="client-usage">
<section id="section-7.3">
        <h3 id="name-client-usage">
<a href="#section-7.3" class="section-number selfRef">7.3. </a><a href="#name-client-usage" class="section-name selfRef">Client Usage</a>
        </h3>
<p id="section-7.3-1">Servers that implement both <span>[<a href="#RFC6154" class="cite xref">RFC6154</a>]</span> and this specification should
optimize their execution of commands like UID SEARCH OR EMAILID 1234
EMAILID 4321.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
<p id="section-7.3-2">Clients can assume that searching the all-mail mailbox using OR/
EMAILID or OR/THREADID is a fast way to find messages again if some
other client has moved them out of the mailbox where they were
previously seen.<a href="#section-7.3-2" class="pilcrow">¶</a></p>
<p id="section-7.3-3">Clients that cache data offline should fetch the EMAILID of all new
messages to avoid redownloading already-cached message details.<a href="#section-7.3-3" class="pilcrow">¶</a></p>
<p id="section-7.3-4">Clients should fetch the MAILBOXID for any new mailboxes before
discarding cache data for any mailbox that is no longer present on
the server so that they can detect renames and avoid redownloading
data.<a href="#section-7.3-4" class="pilcrow">¶</a></p>
<p id="section-7.3-5">Clients that support both IMAP and JMAP <span class="bcp14">SHOULD</span> use the account
identifier component of MAILBOXID when available to maintain accurate
mappings between IMAP mailboxes and JMAP Mailbox objects. This is
particularly important for clients that use JMAP Email Delivery Push
notifications, as these notifications include the accountId property.
By correlating the accountId from a push notification with the account
identifier from MAILBOXID, clients can efficiently determine which
IMAP mailbox corresponds to a newly delivered message without requiring
additional synchronization operations.<a href="#section-7.3-5" class="pilcrow">¶</a></p>
<p id="section-7.3-6">Clients <span class="bcp14">SHOULD</span> be prepared to handle IMAP servers that advertise only
"OBJECTID=EMAILID" without "OBJECTID=MAILBOXID" or vice versa. In such
cases, clients should gracefully degrade functionality to use only the
supported object identifier types.<a href="#section-7.3-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="advice-to-client-implementers">
<section id="section-7.4">
        <h3 id="name-advice-to-client-implemente">
<a href="#section-7.4" class="section-number selfRef">7.4. </a><a href="#name-advice-to-client-implemente" class="section-name selfRef">Advice to Client Implementers</a>
        </h3>
<p id="section-7.4-1">In cases of server failure and disaster recovery, or misbehaving
servers, it is possible that a client will be sent invalid
information, e.g., identical ObjectIDs or ObjectIDs that have changed
where they <span class="bcp14">MUST NOT</span> change according to this document.<a href="#section-7.4-1" class="pilcrow">¶</a></p>
<p id="section-7.4-2">In a case where a client detects inconsistent ObjectID responses from
a server, it <span class="bcp14">SHOULD</span> fall back to relying on the guarantees of
<span>[<a href="#RFC3501" class="cite xref">RFC3501</a>]</span>.  For simplicity, a client <span class="bcp14">MAY</span> instead choose to discard its
entire cache and resync all state from the server.<a href="#section-7.4-2" class="pilcrow">¶</a></p>
<p id="section-7.4-3">Client authors protecting against server misbehavior <span class="bcp14">MUST</span> ensure that
their design cannot get into an infinite loop of discarding cache and
fetching the same data repeatedly without user interaction.<a href="#section-7.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="future-considerations">
<section id="section-8">
      <h2 id="name-future-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-future-considerations" class="section-name selfRef">Future Considerations</a>
      </h2>
<p id="section-8-1">This extension is intentionally defined to be compatible with the
data model in JMAP for Mail.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">A future extension could be proposed to give a way to SELECT a
mailbox by MAILBOXID rather than name.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">A future extension to <span>[<a href="#RFC5228" class="cite xref">RFC5228</a>]</span> could allow fileinto by MAILBOXID
rather than name.<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">An extension to allow fetching message content directly via EMAILID
and message listings by THREADID could be proposed.<a href="#section-8-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="imap-capabilities-registry">
<section id="section-9.1">
        <h3 id="name-imap-capabilities-registry">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-imap-capabilities-registry" class="section-name selfRef">IMAP Capabilities Registry</a>
        </h3>
<p id="section-9.1-1">IANA has updated the "OBJECTID" entry in the "IMAP Capabilities"
registry located at <a href="https://www.iana.org/assignments/imap-capabilities">https://www.iana.org/assignments/imap-capabilities</a>
to reference this document instead of <span>[<a href="#RFC8474" class="cite xref">RFC8474</a>]</span>.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">IANA has added the following entries to the "IMAP Capabilities" registry:<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<table class="center" id="table-1">
          <caption><a href="#table-1" class="selfRef">Table 1</a></caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Capability</th>
              <th class="text-left" rowspan="1" colspan="1">Reference</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">OBJECTID=MAILBOXID</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">OBJECTID=EMAILID</td>
              <td class="text-left" rowspan="1" colspan="1">This document</td>
            </tr>
          </tbody>
        </table>
</section>
</div>
<div id="imap-response-codes-registry">
<section id="section-9.2">
        <h3 id="name-imap-response-codes-registr">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-imap-response-codes-registr" class="section-name selfRef">IMAP Response Codes Registry</a>
        </h3>
<p id="section-9.2-1">IANA has updated the "MAILBOXID" entry in the "IMAP Response Codes"
registry located at <a href="https://www.iana.org/assignments/imap-response-codes">https://www.iana.org/assignments/imap-response-codes</a>
to reference this document instead of <span>[<a href="#RFC8474" class="cite xref">RFC8474</a>]</span>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="object-identifier-generation">
<section id="section-10.1">
        <h3 id="name-object-identifier-generatio">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-object-identifier-generatio" class="section-name selfRef">Object Identifier Generation</a>
        </h3>
<p id="section-10.1-1">It is strongly advised that servers generate ObjectIDs that are safe
to use as filesystem names and unlikely to be autodetected as
numbers.  See implementation considerations.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">If a digest is used for ID generation, it must have a collision-
resistant property, so server implementations are advised to monitor
current security research and choose secure digests.  As the IDs are
generated by the server, it will be possible to migrate to a new hash
by just using the new algorithm when creating new IDs.  This is
particularly true if a prefix is used on each ID, which can be
changed when the algorithm changes.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
<p id="section-10.1-3">The use of a digest for ID generation may be used as proof that a
particular sequence of bytes was seen by the server.  However, this
is only a risk if IDs are leaked to clients who don't have permission
to fetch the data directly.  Servers that are expected to handle
highly sensitive data should consider this when choosing how to
create IDs.<a href="#section-10.1-3" class="pilcrow">¶</a></p>
<p id="section-10.1-4">See also the security considerations in <span><a href="https://rfc-editor.org/rfc/rfc3501#section-11" class="relref">Section 11</a> of [<a href="#RFC3501" class="cite xref">RFC3501</a>]</span>.<a href="#section-10.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="account-identifier-exposure">
<section id="section-10.2">
        <h3 id="name-account-identifier-exposure">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-account-identifier-exposure" class="section-name selfRef">Account Identifier Exposure</a>
        </h3>
<p id="section-10.2-1">The account identifier component of MAILBOXID reveals information about
the account structure of the server and which mailboxes belong to which
accounts. While this information is generally not considered sensitive
in the context of an authenticated IMAP session, servers that wish to
minimize information disclosure <span class="bcp14">MAY</span> choose to generate account identifiers
using unpredictable values (such as UUIDs) rather than sequential numbers
or other patterns that might reveal information about account creation
order or the total number of accounts on the server.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="cross-account-information-leakage">
<section id="section-10.3">
        <h3 id="name-cross-account-information-l">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-cross-account-information-l" class="section-name selfRef">Cross-Account Information Leakage</a>
        </h3>
<p id="section-10.3-1">Servers <span class="bcp14">MUST</span> ensure that the MAILBOXID mechanism does not inadvertently
grant users access to information about accounts they are not authorized
to access. In particular, servers <span class="bcp14">MUST NOT</span> return account identifiers
for accounts that the authenticated user does not have permission to
access, even if such accounts exist on the server.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="consistency-with-jmap-authentication">
<section id="section-10.4">
        <h3 id="name-consistency-with-jmap-authe">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-consistency-with-jmap-authe" class="section-name selfRef">Consistency with JMAP Authentication</a>
        </h3>
<p id="section-10.4-1">When a server advertises both "OBJECTID" (or "OBJECTID=MAILBOXID") and
"JMAPACCESS" capabilities, the server <span class="bcp14">MUST</span> ensure that the same
authentication credentials used for the IMAP session would grant access
to the corresponding JMAP accounts. Inconsistencies in authentication
or authorization between IMAP and JMAP could lead to situations where
a client receives account identifiers that it cannot subsequently use
to access the corresponding JMAP resources, potentially revealing the
existence of accounts the user cannot access.<a href="#section-10.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="privacy-in-multi-tenant-environments">
<section id="section-10.5">
        <h3 id="name-privacy-in-multi-tenant-env">
<a href="#section-10.5" class="section-number selfRef">10.5. </a><a href="#name-privacy-in-multi-tenant-env" class="section-name selfRef">Privacy in Multi-Tenant Environments</a>
        </h3>
<p id="section-10.5-1">In multi-tenant or hosted environments, servers <span class="bcp14">SHOULD</span> generate account
identifiers in a manner that does not reveal relationships between
accounts or organizational structures that users should not be aware of.
For example, if multiple accounts belong to the same organization, the
account identifier generation mechanism should not use patterns that
would allow users to infer these relationships unless such information
is explicitly intended to be visible.<a href="#section-10.5-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-combined-references">
<section id="section-11">
      <h2 id="name-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<div id="sec-normative-references">
<section id="section-11.1">
        <h3 id="name-normative-references">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3501">[RFC3501]</dt>
        <dd>
<span class="refAuthor">Crispin, M.</span>, <span class="refTitle">"INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1"</span>, <span class="seriesInfo">RFC 3501</span>, <span class="seriesInfo">DOI 10.17487/RFC3501</span>, <time datetime="2003-03" class="refDate">March 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc3501">https://www.rfc-editor.org/rfc/rfc3501</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4315">[RFC4315]</dt>
        <dd>
<span class="refAuthor">Crispin, M.</span>, <span class="refTitle">"Internet Message Access Protocol (IMAP) - UIDPLUS extension"</span>, <span class="seriesInfo">RFC 4315</span>, <span class="seriesInfo">DOI 10.17487/RFC4315</span>, <time datetime="2005-12" class="refDate">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4315">https://www.rfc-editor.org/rfc/rfc4315</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4466">[RFC4466]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span> and <span class="refAuthor">C. Daboo</span>, <span class="refTitle">"Collected Extensions to IMAP4 ABNF"</span>, <span class="seriesInfo">RFC 4466</span>, <span class="seriesInfo">DOI 10.17487/RFC4466</span>, <time datetime="2006-04" class="refDate">April 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4466">https://www.rfc-editor.org/rfc/rfc4466</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5228">[RFC5228]</dt>
        <dd>
<span class="refAuthor">Guenther, P., Ed.</span> and <span class="refAuthor">T. Showalter, Ed.</span>, <span class="refTitle">"Sieve: An Email Filtering Language"</span>, <span class="seriesInfo">RFC 5228</span>, <span class="seriesInfo">DOI 10.17487/RFC5228</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5228">https://www.rfc-editor.org/rfc/rfc5228</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5234">[RFC5234]</dt>
        <dd>
<span class="refAuthor">Crocker, D., Ed.</span> and <span class="refAuthor">P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time datetime="2008-01" class="refDate">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5234">https://www.rfc-editor.org/rfc/rfc5234</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5256">[RFC5256]</dt>
        <dd>
<span class="refAuthor">Crispin, M.</span> and <span class="refAuthor">K. Murchison</span>, <span class="refTitle">"Internet Message Access Protocol - SORT and THREAD Extensions"</span>, <span class="seriesInfo">RFC 5256</span>, <span class="seriesInfo">DOI 10.17487/RFC5256</span>, <time datetime="2008-06" class="refDate">June 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5256">https://www.rfc-editor.org/rfc/rfc5256</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5819">[RFC5819]</dt>
        <dd>
<span class="refAuthor">Melnikov, A.</span> and <span class="refAuthor">T. Sirainen</span>, <span class="refTitle">"IMAP4 Extension for Returning STATUS Information in Extended LIST"</span>, <span class="seriesInfo">RFC 5819</span>, <span class="seriesInfo">DOI 10.17487/RFC5819</span>, <time datetime="2010-03" class="refDate">March 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc5819">https://www.rfc-editor.org/rfc/rfc5819</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6851">[RFC6851]</dt>
        <dd>
<span class="refAuthor">Gulbrandsen, A.</span> and <span class="refAuthor">N. Freed, Ed.</span>, <span class="refTitle">"Internet Message Access Protocol (IMAP) - MOVE Extension"</span>, <span class="seriesInfo">RFC 6851</span>, <span class="seriesInfo">DOI 10.17487/RFC6851</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6851">https://www.rfc-editor.org/rfc/rfc6851</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8474">[RFC8474]</dt>
        <dd>
<span class="refAuthor">Gondwana, B., Ed.</span>, <span class="refTitle">"IMAP Extension for Object Identifiers"</span>, <span class="seriesInfo">RFC 8474</span>, <span class="seriesInfo">DOI 10.17487/RFC8474</span>, <time datetime="2018-09" class="refDate">September 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8474">https://www.rfc-editor.org/rfc/rfc8474</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9698">[RFC9698]</dt>
      <dd>
<span class="refAuthor">Gulbrandsen, A.</span> and <span class="refAuthor">B. Gondwana</span>, <span class="refTitle">"The JMAPACCESS Extension for IMAP"</span>, <span class="seriesInfo">RFC 9698</span>, <span class="seriesInfo">DOI 10.17487/RFC9698</span>, <time datetime="2025-01" class="refDate">January 2025</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9698">https://www.rfc-editor.org/rfc/rfc9698</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
<div id="sec-informative-references">
<section id="section-11.2">
        <h3 id="name-informative-references">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC4122">[RFC4122]</dt>
        <dd>
<span class="refAuthor">Leach, P.</span>, <span class="refAuthor">Mealling, M.</span>, and <span class="refAuthor">R. Salz</span>, <span class="refTitle">"A Universally Unique IDentifier (UUID) URN Namespace"</span>, <span class="seriesInfo">RFC 4122</span>, <span class="seriesInfo">DOI 10.17487/RFC4122</span>, <time datetime="2005-07" class="refDate">July 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4122">https://www.rfc-editor.org/rfc/rfc4122</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4648">[RFC4648]</dt>
        <dd>
<span class="refAuthor">Josefsson, S.</span>, <span class="refTitle">"The Base16, Base32, and Base64 Data Encodings"</span>, <span class="seriesInfo">RFC 4648</span>, <span class="seriesInfo">DOI 10.17487/RFC4648</span>, <time datetime="2006-10" class="refDate">October 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6154">[RFC6154]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span> and <span class="refAuthor">J. Nicolson</span>, <span class="refTitle">"IMAP LIST Extension for Special-Use Mailboxes"</span>, <span class="seriesInfo">RFC 6154</span>, <span class="seriesInfo">DOI 10.17487/RFC6154</span>, <time datetime="2011-03" class="refDate">March 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc6154">https://www.rfc-editor.org/rfc/rfc6154</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8620">[RFC8620]</dt>
      <dd>
<span class="refAuthor">Jenkins, N.</span> and <span class="refAuthor">C. Newman</span>, <span class="refTitle">"The JSON Meta Application Protocol (JMAP)"</span>, <span class="seriesInfo">RFC 8620</span>, <span class="seriesInfo">DOI 10.17487/RFC8620</span>, <time datetime="2019-07" class="refDate">July 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8620">https://www.rfc-editor.org/rfc/rfc8620</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="ideas-for-implementing-object-identifiers">
<section id="appendix-A">
      <h2 id="name-ideas-for-implementing-obje">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-ideas-for-implementing-obje" class="section-name selfRef">Ideas for Implementing Object Identifiers</a>
      </h2>
<p id="appendix-A-1">Ideas for calculating account identifiers:<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-2.1">
          <p id="appendix-A-2.1.1">Universally Unique Identifier (UUID) <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span><a href="#appendix-A-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-2.2">
          <p id="appendix-A-2.2.1">Server-assigned sequence number (guaranteed not to be reused)<a href="#appendix-A-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-2.3">
          <p id="appendix-A-2.3.1">Hash of the JMAP accountId (if JMAP integration is provided)<a href="#appendix-A-2.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-A-3">Ideas for calculating mailbox identifiers:<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-4.1">
          <p id="appendix-A-4.1.1">Universally Unique Identifier (UUID) <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span><a href="#appendix-A-4.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-4.2">
          <p id="appendix-A-4.2.1">Server-assigned sequence number (guaranteed not to be reused)<a href="#appendix-A-4.2.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-A-5">Ideas for implementing EMAILID:<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-6.1">
          <p id="appendix-A-6.1.1">Digest of message content (RFC822 bytes) -- expensive unless
cached<a href="#appendix-A-6.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-6.2">
          <p id="appendix-A-6.2.1">UUID <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span><a href="#appendix-A-6.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-6.3">
          <p id="appendix-A-6.3.1">Server-assigned sequence number (guaranteed not to be reused)<a href="#appendix-A-6.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-A-7">Ideas for implementing THREADID:<a href="#appendix-A-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-8.1">
          <p id="appendix-A-8.1.1">Derive from EMAILID of first seen message in the thread.<a href="#appendix-A-8.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-8.2">
          <p id="appendix-A-8.2.1">UUID <span>[<a href="#RFC4122" class="cite xref">RFC4122</a>]</span><a href="#appendix-A-8.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-A-8.3">
          <p id="appendix-A-8.3.1">Server-assigned sequence number (guaranteed not to be reused)<a href="#appendix-A-8.3.1" class="pilcrow">¶</a></p>
</li>
      </ul>
<p id="appendix-A-9">There is a need to index and look up reference/in-reply-to data at
message creation to efficiently find matching messages for threading.
Threading may be either across mailboxes or within each mailbox only.
The server has significant leeway here.<a href="#appendix-A-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="changes-from-rfc-8474">
<section id="appendix-B">
      <h2 id="name-changes-from-rfc-8474">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-changes-from-rfc-8474" class="section-name selfRef">Changes from RFC 8474</a>
      </h2>
<p id="appendix-B-1">This document obsoletes <span>[<a href="#RFC8474" class="cite xref">RFC8474</a>]</span> and introduces the following changes:<a href="#appendix-B-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-B-2.1">
          <p id="appendix-B-2.1.1">Added support for partial implementation through the OBJECTID=MAILBOXID
and OBJECTID=EMAILID capabilities, allowing servers to implement only
a subset of object identifier types.<a href="#appendix-B-2.1.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.2">
          <p id="appendix-B-2.2.1">Extended the MAILBOXID to include an account identifier component,
changing the syntax from a single objectid to a pair of objectids
(account identifier and mailbox identifier).<a href="#appendix-B-2.2.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.3">
          <p id="appendix-B-2.3.1">Added security considerations for account identifier exposure,
cross-account information leakage, JMAP authentication consistency,
and privacy in multi-tenant environments.<a href="#appendix-B-2.3.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.4">
          <p id="appendix-B-2.4.1">Updated IANA registrations to include the new partial implementation
capabilities.<a href="#appendix-B-2.4.1" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="appendix-B-2.5">
          <p id="appendix-B-2.5.1">Added guidance for client implementers on handling partial
implementations and multi-account environments.<a href="#appendix-B-2.5.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="acknowledgements">
<section id="appendix-C">
      <h2 id="name-acknowledgements">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-C-1">The authors would like to thank the members of the IETF mailmaint
working group for their contributions to this specification.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="changes">
<section id="appendix-D">
      <h2 id="name-changes">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-changes" class="section-name selfRef">Changes</a>
      </h2>
<p id="appendix-D-1">[[This section to be removed by RFC Editor]]<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2"><strong>draft-gondwana-degennaro-imap-objectid-bis-00</strong><a href="#appendix-D-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-D-3.1">
          <p id="appendix-D-3.1.1">Initial version<a href="#appendix-D-3.1.1" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bron Gondwana</span></div>
<div dir="auto" class="left"><span class="org">Fastmail</span></div>
<div dir="auto" class="left"><span class="street-address">Level 2, 114 William St</span></div>
<div dir="auto" class="left">
<span class="locality">Melbourne</span> <span class="region">VIC 3000</span> </div>
<div dir="auto" class="left"><span class="country-name">Australia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:brong@fastmailteam.com" class="email">brong@fastmailteam.com</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://www.fastmail.com" class="url">https://www.fastmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mauro De Gennaro</span></div>
<div dir="auto" class="left"><span class="org">Stalwart Labs LLC</span></div>
<div dir="auto" class="left"><span class="street-address">1309 Coffeen Avenue, Suite 1200</span></div>
<div dir="auto" class="left">
<span class="locality">Sheridan</span>, <span class="region">WY</span> <span class="postal-code">82801</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mauro@stalw.art" class="email">mauro@stalw.art</a>
</div>
<div class="url">
<span>URI:</span>
<a href="https://stalw.art" class="url">https://stalw.art</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
